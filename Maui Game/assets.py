from random import randint
from math import tau


class Compass:
    north = """\
              @@@@@@@@@@@@@
         @@@@@*     .     &@@@@(
       @@@          @         .@@@
     @@@           @@@           @@@
   @@@            @@@@@            @@.
  *@@            @@@@@@@            @@
  @@@           @@@@@@@@@           @@@
  @@                                 @@
  @@@                               @@@
  .@@                               @@
   @@@                             @@
     @@@                         @@@
       @@@                    /@@@
         &@@@@@           @@@@@.
              @@@@@@@@@@@@@
              """

    north_east = """\
              @@@@@@@@@@@@@
         %@@@@%           *@@@@@
       @@@                     @@@
     @@@                     .@  @@@
   &@@                   @@@@#     @@@
  ,@@               @@@@@@@@        @@/
  @@@               @@@@@@@         @@@
  @@                  @@@@           @@
  @@@                               @@@
  (@@                               @@
   @@@                             @@(
     @@@                         @@@
       @@@                    ,@@@
         @@@@@%           @@@@@,
              @@@@@@@@@@@@@
              """

    east = """\
              @@@@@@@@@@@@@
         &@@@@@           @@@@@(
       @@@                     @@@
     @@@                         @@@
   @@@                             @@%
  (@@                               @@
  @@&                 @@@@@@#.      @@@
  @@                  @@@@@@@@@@@@-  @@
  @@&                 @@@@@@#^      @@@
  /@@                               @@
   @@@                             @@#
     @@@                         @@@
       @@@                    #@@@
         /@@@@@           @@@@@
              &@@@@@@@@@@@#
              """

    south_east = """\
              @@@@@@@@@@@@@
         @@@@@%           %@@@@@
       @@@                     @@@
     @@@                         @@@
   @@@                             @@@
  *@@                               @@,
  @@@                               @@@
  @@                  @@@@           @@
  @@@               @@@@@@@         @@@
  ,@@               @@@@@@@@        @@.
   @@@                   @@@@@     @@@
     @@@                      @  @@@
       @@@                     @@@
         &@@@@@           @@@@@%
              @@@@@@@@@@@@@
              """

    south = """\
              @@@@@@@@@@@@@
         (@@@@@           @@@@@@
       @@@                     @@@
     @@@                         @@@
   %@@                             @@&
   @@                               @@
  @@@                               @@@
  @@                                 @@
  @@@           @@@@@@@@@           @@@
  .@@            @@@@@@@            @@
   @@@            @@@@@            @@/
     @@@           @@@           @@@
       @@@          @         ,@@@
         @@@@@@     |     @@@@@,
              @@@@@@@@@@@@@
              """

    south_west = """\
              @@@@@@@@@@@@@
         @@@@@%           &@@@@@
       @@@                     @@@
     @@@                         @@@
   @@@                             @@@
  #@@                               @@/
  @@&                               @@@
  @@           @@@@                  @@
  @@@         @@@@@@@               @@@
  #@@        @@@@@@@@               @@/
   @@@     @@@@@                   @@@
     @@@  @                      @@@
       @@@                     @@@
         @@@@@&           &@@@@&
              @@@@@@@@@@@@@
              """

    west = """\
              @@@@@@@@@@@@@
         @@@@@@           @@@@@#
       @@@                     @@@
     @@@                         @@@
   @@@                             @@%
  ,@@                               @@
  @@@      .#@@@@@@                 @@@
  @@  -@@@@@@@@@@@@                  @@
  @@@      ^#@@@@@@                 @@@
  .@@                               @@
   @@@                             @@#
     @@@                         @@@
       @@@                    .@@@
         &@@@@@           @@@@@(
              @@@@@@@@@@@@@
              """

    north_west = """\
              @@@@@@@@@@@@@
         @@@@@            .@@@@@
      #@@@                     @@@*
     @@@ @                       @@@
   @@@     @@@@@                   @@@
  @@@        @@@@@@@@               @@%
  @@.         @@@@@@@               #@@
  @@           @@@@                  @@
  @@,                               %@@
  @@@                               @@%
   @@@                             @@@
     @@@                         @@@
      *@@@                     @@@
         @@@@@,           /@@@@@
              @@@@@@@@@@@@@
              """

    def angle_to_compass(angle):
        """Returns the compass point closest to the inputted angle

        Args:
            angle (float): The angle to assoisate a compass point with.
              - Measured in Radians
        """
        angle %= tau
        bearings = {0*tau/8: Compass.east, 1*tau/8: Compass.north_east,
                    2*tau/8: Compass.north, 3*tau/8: Compass.north_west,
                    4*tau/8: Compass.west, 5*tau/8: Compass.south_west,
                    6*tau/8: Compass.south, 7*tau/8: Compass.south_east}

        return bearings[min(bearings.keys(), key=lambda x: abs(x - angle))]


class FishTile:
    TILE = """\
 _______________\N{SPACE}
|               |
|   <><   <><   |
|     <><       |
|  <><    <><   |
|      <><      |
|               |
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ """.splitlines()

    def move_onto(player, add_tile):
        player.number_of_fish += randint(1, 3)
        add_tile('f', 1)


class StormTile:
    TILE = """\
 _______________\N{SPACE}
| (_ , /\\  ,_/  |
|   --\\ `\\--`   |
|      _\\ _\\    |
|       `\\_\\    |
|       `\\\\     |
|         \\     |
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ """.splitlines()

    def move_onto(player, add_tile):
        player.number_of_fish -= randint(1, 3)
        add_tile('s', 1)


class BoatTile:
    TILE = """\
 _______________\N{SPACE}
|    v  ~. ~.   |
|       /| /|   |
|      / |/ |   |
| v  _/__/__|_  |
|    \\--------/ |
|~~~`~~~~~~'~~~~|
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ """.splitlines()


class NorthIsland:
    TILE = """\
 _______________\N{SPACE}
|   ~    %   ~  |
| ~    ~   %% % |
|  ~   ~   %%%  |
|    ~  %%%   ~ |
| ~   %%%%  ~   |
|   %%%%  ~   ~ |
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ """.splitlines()

    def move_onto(player, add_tile):
        player.won = True


class BlankTile:
    TILE = """\
 _______________\N{SPACE}
|  ~      ~     |
|      ~    ~   |
|   ~     ~     |
|      ~     ~  |
|   ~     ~     |
| ~    ~     ~  |
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ """.splitlines()

    def move_onto(player, add_tile):
        pass


class End:
    VICTORY = """\
   %%       %%      %%%%%%%%%     %%     %%
   ###########      #%     #%     ##     ##
       ##           #%     #%     ##     ##
      /##           ########%     #########

    ######################################,
    ##//////////////////////////////////##,
    #####..........................//(####,
  *@@..*//@@......................//@@%////%@@
@@(....*//@@......................//@@#....*//@@
@@(..@@@@@//@@#................///@@..*@@@@(//@@
@@(....%@@//@@#................///@@..*@@..*//@@
  *@@.....////(@@............//&@&....,////%@@
    @@@@@@@@@@@@............//&@@@@@@@@@@@,
                @@*......,//@@
                @@*......,//@@
                  %@@..//(@@
                ..#&&..**(&&..
                @@(//,,,,*//@@
         ____.**@@%#########@@/**.___
        |&&&&&###################&&&&|
        |@@###(((((((((((((((((((##@@|
        |@@########################@@|
        |@@@@@@@@@@@@@@@@@@@@@@@@@@@@|

  ,##       %#/    ########%     ##     ##,    %#
  ,##  /##  %#/    #%    ,#%     ####/  ##,    %#
  ,##  /##  %#/    #%    ,#%     ##  .####,
    ##.  ##        ########%     ##     ##,    %#"""

    DEATH = """
__     __            _____ _                           _
\\ \\   / /           / ____| |                         | |
 \\ \\_/ /__  _   _  | (___ | |_ __ _ _ ____   _____  __| |
  \\   / _ \\| | | |  \\___ \\| __/ _` | '__\\ \\ / / _ \\/ _` |
   | | (_) | |_| |  ____) | || (_| | |   \\ V /  __/ (_| |
   |_|\\___/ \\__,_| |_____/ \\__\\__,_|_|    \\_/ \\___|\\__,_|
                      @@@@@@@@@@@@@@@@
                @@@@@                  #@@@@
            @@@                              @@%
        @@&                                    @@
      @@                                         @@
      @@                                            @@
    @@                                              @@
    @@        @@@@@@@@@              @@@@@@@@        @@
  (@      @@@@@@@@@@@@@@@        @@@@@@@@@@@@@@      @@
  @@     @@@@@@@@@@@@@@@@@      @@@@@@@@@@@@@@@@     @@
  @@     @@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@    @@
  @@     @@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@    @@
    @@     @@@@@@@@@@@@@@@       @@@@@@@@@@@@@@@@    @@
    @@      @@@@@@@@@@@     @     @@@@@@@@@@@@     @@
      @@@                 @@@@@@.                  @@
        @@@              @@    @@               @@@
            @@@@                         @@@@@*
                @&                  #     @@
    @@@@@@@      @@@@@@@@   @@@@  @@@@@@@@@     @@@@@@@
  @@     .@,                                 @@      @@
  @@@@    @@@@                               @@@    @@@@
@@            .@@                   @@@@             @@
@@    .@@@          @@@@         @@@@          @@@    *@@
    @@(     @@@@@         .@@@@@          @@@@&     @@@
                  @@@@@ @@@         @@@@@
          @,    @@@@         @@@     @@@@    (@
        @@   @@&        @@@@@ @@@@(        @@@   @@
        @@         @@@@             @@@@         @@
          @@    @@                       @@    @@
          @@@@@@@                         @@@@@@.
       _______      _____             _   _       _
      |__   __|    |  __ \\           | | | |     | |
         | | ___   | |  | | ___  __ _| |_| |__   | |
         | |/ _ \\  | |  | |/ _ \\/ _` | __| '_ \\  | |
         | | (_) | | |__| |  __/ (_| | |_| | | | |_|
         |_|\\___/  |_____/ \\___|\\__,_|\\__|_| |_| (_)"""


class Text:
    rules = """\
            ___---*** Māui's Adventure ***---___

Rules:
    - Keys:
        - Type one of W, A, S, or D or the arrow keys to move the boat
        - W/↑: Move the player up one tile.
        - A/←: Move the player one tile to the left.
        - S/↓: Move the player down on tile.
        - D/→: Move the player one to the right.

        - H: Prints the game rules

    You start with 15 fish, every second move you lose 1 fish,
    if you reach 0 fish you lose/starve to death.

    If you try to move off the board you will warp to the opposite
    side of the board.

    - Tiles:
        - Boat: The "Boat Tile" reflects the position of the player.

        - Fish: Moving onto a "Fish Tile" gains you 1-3 fish.

        - Storm: Moving onto a "Storm Tile" costs you 1-3 fish.

        - Blank: Moving onto a "Blank Tile" has no effect."""

    cardinal_direction = 'east'
    story_snippets = [
      f"To the {cardinal_direction} lies Te Ika-a-Māui an island to be...",
      ("Māui's brothers mocked him, saying that he couldn't fish, "
       "undeterred he snuck onto their waka to prove them wrong"),
                      ]
